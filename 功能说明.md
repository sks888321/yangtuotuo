# 杨拓拓教育管理系统 - 功能说明

## 📋 项目概述

本系统是一个完整的教育培训机构管理系统，支持老师、学生、课程管理，以及可视化的课程排课功能。

## 🎯 核心功能

### 1. 本地文件存储
- **文件存储**：使用 File System Access API 将数据存储为本地JSON文件
- **自动降级**：如果浏览器不支持，自动降级到 localStorage
- **数据持久化**：通过 IndexedDB 持久化目录句柄，无需每次选择
- **文件格式**：
  - `users.json` - 用户数据
  - `courses.json` - 课程数据
  - `schedules.json` - 排课数据
  - `payments.json` - 缴费数据

### 2. 用户管理
- 添加/编辑/删除用户
- 用户角色：学生、教师、管理员
- 搜索功能：按姓名、邮箱、电话搜索
- 用户信息包括：姓名、邮箱、电话、角色等

### 3. 课程管理
- 添加/编辑/删除课程
- 课程信息：
  - 课程名称、描述
  - 授课教师
  - 价格、时长、容量
  - 科目、级别、颜色标记
- 搜索功能：按课程名称、描述、教师名搜索

### 4. 课程表 & 排课功能 ⭐

#### 4.1 周课程表视图
- **可视化日历**：以周为单位显示课程安排
- **时间槽**：8:00-21:00 每小时一个时间段
- **颜色标记**：不同课程用不同颜色区分
- **实时信息**：显示课程名称、教师、学生人数、时间
- **状态显示**：已安排、已完成、已取消
- **导航功能**：上一周、下一周、回到今天

#### 4.2 快速排课
- **点击时间槽**：直接在日历上点击空白时间槽创建排课
- **点击课程**：查看课程详情
- **拖拽支持**：（可扩展功能）
- **冲突检测**：（可扩展功能）

#### 4.3 排课管理
- 选择课程、教师（自动关联）
- 选择学生（支持多选）
- 设置日期和时间
- 添加教室、备注信息
- 状态管理：已安排/已完成/已取消

### 5. 缴费管理
- 添加/编辑/删除缴费记录
- 缴费信息：
  - 学生、课程
  - 金额、支付方式
  - 状态：待支付、已支付、已退款
  - 支付日期
- 按状态筛选

### 6. 仪表盘
- **统计卡片**：
  - 总用户数
  - 总课程数
  - 今日排课
  - 待缴费笔数
- **本周课程表**：直接在首页查看本周课程安排
- **最近排课**：最新的5条排课记录
- **最近缴费**：最新的5条缴费记录

## 🔧 技术实现

### 数据存储架构
```typescript
// 文件系统API + IndexedDB持久化
- File System Access API: 主存储方案
- IndexedDB: 存储目录句柄
- localStorage: 备用降级方案
```

### 数据结构
```typescript
// 用户
interface User {
  id: string
  name: string
  email: string
  phone: string
  role: 'student' | 'teacher' | 'admin'
  avatar?: string
  address?: string
  notes?: string
  createdAt: string
}

// 课程
interface Course {
  id: string
  name: string
  description: string
  teacherId: string
  teacherName: string
  price: number
  duration: number
  capacity: number
  subject?: string
  level?: string
  color?: string
  createdAt: string
}

// 排课
interface ScheduleItem {
  id: string
  courseId: string
  courseName: string
  teacherId: string
  teacherName: string
  studentIds: string[]
  studentNames?: string[]
  date: string
  startTime: string
  endTime: string
  status: 'scheduled' | 'completed' | 'cancelled'
  classroom?: string
  notes?: string
  createdAt: string
}
```

## 📖 使用说明

### 首次使用
1. 启动应用：`pnpm dev`
2. 如果浏览器支持，系统会提示选择存储目录
3. 选择一个空文件夹作为数据存储位置
4. 系统会自动初始化示例数据

### 日常使用

#### 查看本周课程
1. 进入"仪表盘"或"排课管理"
2. 查看周课程表，一目了然看到本周所有课程
3. 不同颜色代表不同课程
4. 点击课程卡片查看详情

#### 添加排课
**方法1：快速排课**
1. 在周课程表上点击空白时间槽
2. 系统会自动填充日期和时间
3. 选择课程和学生
4. 保存

**方法2：传统方式**
1. 点击"添加排课"按钮
2. 填写完整信息
3. 保存

#### 管理学生和老师
1. 进入"用户管理"
2. 点击"添加用户"
3. 填写信息并选择角色
4. 保存

#### 添加课程
1. 进入"课程管理"
2. 点击"添加课程"
3. 选择授课教师
4. 填写课程信息
5. 保存

## 🌟 特色功能

### 1. 本周课程一览
- 横跨7天的课程表视图
- 每个时间段的课程信息一目了然
- 快速识别哪些时段有课，哪些时段空闲
- 查看每节课的学生人数和状态

### 2. 实时数据同步
- 所有修改立即保存到本地文件
- 多个页面数据实时同步
- 删除、编辑立即生效

### 3. 智能关联
- 选择课程自动关联教师
- 选择学生自动关联学生姓名
- 数据一致性保证

### 4. 灵活的数据导出
- 数据以JSON格式存储
- 可直接查看、备份、迁移
- 支持手动编辑（高级用户）

## 🔒 数据安全

- 本地存储，数据不上传到云端
- 完全掌控自己的数据
- 定期备份JSON文件即可
- 支持数据迁移

## 🚀 未来扩展

可以扩展的功能：
- [ ] 课程冲突检测
- [ ] 拖拽排课
- [ ] 自动排课算法
- [ ] 课程统计报表
- [ ] 学生考勤管理
- [ ] 成绩管理
- [ ] 数据导入导出（Excel）
- [ ] 打印课程表
- [ ] 教师工资计算
- [ ] 短信/邮件通知

## 💡 技术栈

- **前端框架**: Vue 3 + TypeScript
- **UI库**: Naive UI
- **路由**: Vue Router
- **构建工具**: Vite
- **存储**: File System Access API + IndexedDB + localStorage

## 📝 注意事项

1. **浏览器兼容性**：File System Access API 需要较新的浏览器（Chrome 86+, Edge 86+）
2. **权限**：首次使用需要授权访问文件系统
3. **数据备份**：建议定期备份存储目录
4. **并发访问**：同一时间建议只在一个浏览器标签页中使用

## 🆘 故障排除

### 如果数据没有保存
1. 检查是否授权了文件系统访问
2. 查看浏览器控制台是否有错误
3. 尝试重新选择存储目录

### 如果浏览器不支持文件API
- 系统会自动降级到localStorage
- 功能正常使用，但数据存储在浏览器缓存中

### 数据恢复
- 如果有备份的JSON文件，直接复制到存储目录即可
